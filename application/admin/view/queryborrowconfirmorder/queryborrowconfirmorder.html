<!DOCTYPE html>
<html>
	<head>
		<title>查询借样确认单</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
		<link rel="stylesheet" type="text/css" href="/static/layui/css/layui.css">
	</head>
	<body>
		<!-- {include file="publictemplate/querysearchcondition"/} -->
		<div style="margin:20px 10px;min-height: 180px;border: 2px solid #C7C7C7;" id="serachcondition">
			<form class="layui-form" style="padding-top:20px;">
				<div class="layui-form-item">
				    <div class="layui-inline">
				      <label class="layui-form-label">日期：</label>
				      <div class="layui-input-inline" style="width: 200px;">
				         <input type="text" name="startdate" id="startdate" lay-filter="startdate" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
				      </div>
				      <div class="layui-form-mid">至</div>
				      <div class="layui-input-inline" style="width: 200px;">
				         <input type="text" name="enddate" id="enddate" lay-filter="enddate" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
				      </div>
				    </div>

	 				<div class="layui-inline">
						<label class="layui-form-label">部门：</label>
						<div class="layui-input-inline" style="width: 200px;">
					      <select name="department" lay-filter="department">
					        <option value="">请选择</option>
					      </select>
					    </div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">区域经理：</label>
						<div class="layui-input-inline" style="width: 200px;">
							<input type="text" name="areamanger" lay-filter="areamanger" placeholder="请输入区域经理" autocomplete="off" class="layui-input">
						</div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">状态：</label>
						<div class="layui-input-inline">
					      <select name="orderstate" lay-filter="orderstate">
					        <option value="">请选择</option>
					        <option value="0" selected>已完成</option>
					        <option value="1">处理中</option>
					        <option value="2">取消</option>
					        <option value="3">备货</option>
					      </select>
					    </div>
					</div>
				</div>

				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label">流水号：</label>
						<div class="layui-input-inline" style="width: 200px;">
							<input type="text" name="serialnumber" lay-filter="serialnumber" placeholder="请输入流水号" autocomplete="off" class="layui-input">
						</div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">收货人：</label>
						<div class="layui-input-inline" style="width: 200px;">
							<input type="text" name="recvpeople" lay-filter="recvpeople" placeholder="请输入收货人" autocomplete="off" class="layui-input">
						</div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">货场：</label>
						<div class="layui-input-inline" style="width: 200px;">
							<input type="text" name="yard" lay-filter="yard" placeholder="请输入货场" autocomplete="off" class="layui-input">
						</div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">运单号：</label>
						<div class="layui-input-inline" style="width: 200px;">
							<input type="text" name="couriernumber" lay-filter="couriernumber" placeholder="请输入运单号" autocomplete="off" class="layui-input">
						</div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">运费方式：</label>
						<div class="layui-input-inline">
					      <select name="freightmode" lay-filter="freightmode">
					        <option value="">请选择</option>
					        <option value="0" selected>到付</option>
					        <option value="1">现金</option>
					        <option value="2">代付</option>
					        <option value="3">公司付</option>
					      </select>
					    </div>
					</div>
				</div>

				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label">产品分类：</label>
						<div class="layui-input-inline">
					      <select name="productclass" lay-filter="productclass">
					        <option value="">请选择</option>
							{volist name="productlist" id="vo"}
								<option value={$vo.type_id}>{$vo.type_name}</option>
							{/volist}
					      </select>
					    </div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">品牌：</label>
						<div class="layui-input-inline">
					      <select name="brand" lay-filter="brand">
					        <option value="">请选择</option>
							{volist name="brandlist" id="vo"}
								<option value={$vo.brand_id}>{$vo.brand_name}</option>
							{/volist}
					      </select>
					    </div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">产品型号：</label>
						<div class="layui-input-inline" style="width: 200px;">
							<input type="text" name="producttype" lay-filter="producttype" placeholder="请输入产品型号" autocomplete="off" class="layui-input">
						</div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label">生产地：</label>
						<div class="layui-input-inline">
					      <select name="productarea" lay-filter="productarea">
					        <option value="">请选择</option>
							{volist name="placelist" id="vo"}
								<option value={$vo.place_id}>{$vo.place_name}</option>
							{/volist}
					      </select>
					    </div>
					</div>

					<div class="layui-inline">
						<label class="layui-form-label" style="width: 100px;">非常规产品：</label>
						<div class="layui-input-inline">
					      <select name="customproduct" lay-filter="customproduct">
					        <option value="">请选择</option>
							{volist name="unclist" id="vo"}
								<option value={$vo.unc_product_id}>{$vo.unc_product_name}</option>
							{/volist}
					      </select>
					    </div>
					</div>
				</div>

				<div class="layui-form-item">
					<button class="layui-btn" lay-submit="" lay-filter="export" style="float: right;margin-right: 10px;">导出</button>
					<button class="layui-btn" lay-submit="" lay-filter="query" style="float: right;margin-right: 10px;">查询</button>
				</div>
			</form>
		</div>
		<div style="margin:20px 10px;">
			<div><h2>借样单查询</h2></div>
			<table class="layui-hide" id="queryborroworder" lay-filter="queryborroworder"></table>
			<script type="text/html" id="operatebar">
			  <a class="layui-btn layui-btn-xs layui-btn-primary" lay-event="detail">查看</a>
			  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
			  <a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="delete">删除</a>
			</script>
		</div>
		<script src="/static/layui/layui.js"></script>
		<script type="text/javascript">
			var  divHeight,clientHeight;
			layui.use(['layer','jquery','laydate','form','table'],function(){
				var form = layui.form ,layer = layui.layer,jq = layui.jquery,laydate = layui.laydate,table = layui.table;

				/*时间控件渲染*/
				laydate.render({
				    elem: '#startdate'
				});
				
				laydate.render({
				    elem: '#enddate'
				});

				/*监听查询按钮*/
				form.on('submit(query)',function(data){
					var queryInfo = data.field;

  			      	table.reload('querytable', {
				        page: {
				          curr: 1
				        }
				        ,where: {
				            queryInfo: queryInfo
				        }
			      	});
		  			return false;
				});

				
				/*监听导出按钮*/
				form.on('submit(export)',function(data){
					var index = top.layer.msg('打开导出参数设置界面');
					return false;
				});

				divHeight = document.getElementById('serachcondition').offsetHeight;   /*搜索框div高度*/
				clientHeight = jq(window).height()-divHeight-100;

				/*表格渲染*/
				table.render({
				    elem: '#queryborroworder'
				    ,height:clientHeight
				    ,url:"{:url('admin/queryborrowconfirmorder/getexamineorder')}"     //动态获取数据
				    ,cols: [[
				       {type:'checkbox'}
				      ,{field: 'write_date', title: '下单日期', width: 150, sort: true}
				      ,{field:'complete_date',title:'完成日期',width:150,sort:true}
				      ,{field: 'id',title: '流水号', minWidth: 150,sort:true}
  				      ,{field: 'organize_name', title: '部门', minWidth: 150}
				      ,{field: 'fullname', title: '区域经理', minWidth: 100}
				      ,{field: 'receiver_name', title: '收件人', minWidth: 100}
				      ,{field: 'count', title: '项数', width: 80}
				      ,{field: 'state', title: '状态', minWidth: 100}
  				      ,{field: 'transfer_fee_mode', title: '运费方式', width: 100}
				      ,{field: 'transfer_order_num', title: '运单号', minWidth: 100}
				      ,{fixed: 'right', title:'操作', width:200, align:'center', toolbar: '#operatebar'}
				    ]]
				    ,id: 'querytable'
				    ,data:[]
				    ,even: true
				    ,page: true //是否显示分页
				    ,limit: 10 //每页默认显示的数量
				    ,done: function(res){
				    	console.log(res);    //res为接口返回的数据
				    }
				  });

				/*监听工具条*/
				table.on('tool(queryborroworder)', function(obj){
				    var data = obj.data;
				    if(obj.event === 'detail'){
				    	layer.msg('下单日期：'+ data.write_date + ' 的查看操作');
				    }else if(obj.event === 'edit'){
				    	layer.msg('编辑操作');
				    }else if(obj.event === 'delete'){
				    	layer.msg('删除操作');
				    }
			  	});
			});
		</script>
	</body>
</html>